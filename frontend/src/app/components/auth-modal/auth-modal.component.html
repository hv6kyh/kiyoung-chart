<div class="modal-overlay" (click)="authService.closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="authService.closeModal()">✕</button>

        <div class="auth-tabs">
            <button class="tab-btn" [class.active]="authService.authMode() === 'login'"
                (click)="setMode('login')">로그인</button>
            <button class="tab-btn" [class.active]="authService.authMode() === 'signup'"
                (click)="setMode('signup')">회원가입</button>
        </div>

        @if (authService.authError()) {
            <div class="auth-error">
                {{ authService.authError() }}
            </div>
        }

        @if (authService.authMode() === 'login') {
        <form class="login-form" (submit)="$event.preventDefault(); onSubmit()">
            <div class="form-group">
                <label>이메일</label>
                <input type="email" placeholder="email@example.com"
                    [value]="email()"
                    (input)="onEmailInput($event)"
                    [disabled]="authService.authLoading()">
            </div>
            <div class="form-group">
                <label>비밀번호</label>
                <input type="password" placeholder="••••••••"
                    [value]="password()"
                    (input)="onPasswordInput($event)"
                    [disabled]="authService.authLoading()">
            </div>
            <button class="submit-btn" type="submit" [disabled]="authService.authLoading()">
                @if (authService.authLoading()) {
                    <span class="spinner"></span> 처리 중...
                } @else {
                    로그인
                }
            </button>
        </form>
        } @else {
        <form class="signup-form" (submit)="$event.preventDefault(); onSubmit()">
            <div class="form-group">
                <label>이메일</label>
                <input type="email" placeholder="email@example.com"
                    [value]="email()"
                    (input)="onEmailInput($event)"
                    [disabled]="authService.authLoading()">
            </div>
            <div class="form-group">
                <label>비밀번호</label>
                <input type="password" placeholder="••••••••"
                    [value]="password()"
                    (input)="onPasswordInput($event)"
                    [disabled]="authService.authLoading()">
            </div>
            <button class="submit-btn" type="submit" [disabled]="authService.authLoading()">
                @if (authService.authLoading()) {
                    <span class="spinner"></span> 처리 중...
                } @else {
                    가입하기
                }
            </button>
        </form>
        }
    </div>
</div>
